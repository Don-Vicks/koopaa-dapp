{
  "address": "33NAzyKNuayyqKNW6QMXbNT69CikAhCUhPbgwZn1LR3o",
  "metadata": {
    "name": "koopa",
    "version": "0.1.0",
    "spec": "0.1.0",
    "description": "Created with Anchor"
  },
  "instructions": [
    {
      "name": "initialize",
      "accounts": [
        { "name": "globalState", "isMut": true, "isSigner": false },
        { "name": "admin", "isMut": true, "isSigner": true },
        { "name": "systemProgram", "isMut": false, "isSigner": false }
      ],
      "args": []
    },
    {
      "name": "createAjoGroup",
      "accounts": [
        { "name": "ajoGroup", "isMut": true, "isSigner": false },
        { "name": "creator", "isMut": true, "isSigner": true },
        { "name": "globalState", "isMut": true, "isSigner": false },
        { "name": "tokenMint", "isMut": false, "isSigner": false },
        { "name": "creatorTokenAccount", "isMut": true, "isSigner": false },
        { "name": "groupTokenVault", "isMut": true, "isSigner": false },
        { "name": "tokenProgram", "isMut": false, "isSigner": false },
        { "name": "systemProgram", "isMut": false, "isSigner": false },
        { "name": "rent", "isMut": false, "isSigner": false }
      ],
      "args": [
        { "name": "name", "type": "string" },
        { "name": "securityDeposit", "type": "u64" },
        { "name": "contributionAmount", "type": "u64" },
        { "name": "contributionInterval", "type": "u8" },
        { "name": "payoutInterval", "type": "u8" },
        { "name": "numParticipants", "type": "u8" }
      ]
    },
    {
      "name": "joinAjoGroup",
      "accounts": [
        { "name": "ajoGroup", "isMut": true, "isSigner": false },
        { "name": "participant", "isMut": false, "isSigner": true },
        { "name": "globalState", "isMut": true, "isSigner": false },
        { "name": "tokenMint", "isMut": false, "isSigner": false },
        { "name": "participantTokenAccount", "isMut": true, "isSigner": false },
        { "name": "groupTokenVault", "isMut": true, "isSigner": false },
        { "name": "tokenProgram", "isMut": false, "isSigner": false },
        { "name": "systemProgram", "isMut": false, "isSigner": false }
      ],
      "args": []
    },
    {
      "name": "contribute",
      "accounts": [
        { "name": "ajoGroup", "isMut": true, "isSigner": false },
        { "name": "contributor", "isMut": false, "isSigner": true },
        { "name": "contributorTokenAccount", "isMut": true, "isSigner": false },
        { "name": "groupTokenVault", "isMut": true, "isSigner": false },
        { "name": "tokenMint", "isMut": false, "isSigner": false },
        { "name": "tokenProgram", "isMut": false, "isSigner": false },
        { "name": "systemProgram", "isMut": false, "isSigner": false }
      ],
      "args": []
    },
    {
      "name": "payout",
      "accounts": [
        { "name": "ajoGroup", "isMut": true, "isSigner": false },
        { "name": "groupSigner", "isMut": false, "isSigner": false },
        { "name": "groupTokenVault", "isMut": true, "isSigner": false },
        { "name": "recipient", "isMut": true, "isSigner": false },
        { "name": "caller", "isMut": false, "isSigner": true },
        { "name": "tokenMint", "isMut": false, "isSigner": false },
        { "name": "tokenProgram", "isMut": false, "isSigner": false }
      ],
      "args": []
    },
    {
      "name": "closeAjoGroup",
      "accounts": [
        { "name": "ajoGroup", "isMut": true, "isSigner": false },
        { "name": "participant", "isMut": false, "isSigner": true },
        { "name": "globalState", "isMut": true, "isSigner": false },
        { "name": "systemProgram", "isMut": false, "isSigner": false }
      ],
      "args": []
    },
    {
      "name": "claimRefund",
      "accounts": [
        { "name": "ajoGroup", "isMut": true, "isSigner": false },
        { "name": "groupSigner", "isMut": false, "isSigner": false },
        { "name": "groupTokenVault", "isMut": true, "isSigner": false },
        { "name": "participant", "isMut": true, "isSigner": true },
        { "name": "participantTokenAccount", "isMut": true, "isSigner": false },
        { "name": "tokenMint", "isMut": false, "isSigner": false },
        { "name": "tokenProgram", "isMut": false, "isSigner": false }
      ],
      "args": []
    }
  ],
  "accounts": [
    {
      "name": "AjoGroup",
      "type": {
        "kind": "struct",
        "fields": [
          { "name": "name", "type": "string" },
          { "name": "securityDeposit", "type": "u64" },
          { "name": "contributionAmount", "type": "u64" },
          { "name": "contributionInterval", "type": "u8" },
          { "name": "payoutInterval", "type": "u8" },
          { "name": "numParticipants", "type": "u8" },
          {
            "name": "participants",
            "type": { "vec": { "defined": "AjoParticipant" } }
          },
          { "name": "startTimestamp", "type": { "option": "i64" } },
          { "name": "payoutRound", "type": "u16" },
          { "name": "closeVotes", "type": { "vec": "publicKey" } },
          { "name": "isClosed", "type": "bool" },
          { "name": "vaultBump", "type": "u8" },
          { "name": "bumps", "type": "u8" }
        ]
      }
    },
    {
      "name": "GlobalState",
      "type": {
        "kind": "struct",
        "fields": [
          { "name": "totalGroups", "type": "u64" },
          { "name": "activeGroups", "type": "u64" },
          { "name": "bumps", "type": "u8" }
        ]
      }
    }
  ],
  "types": [
    {
      "name": "AjoParticipant",
      "type": {
        "kind": "struct",
        "fields": [
          { "name": "pubkey", "type": "publicKey" },
          { "name": "contributionRound", "type": "u16" },
          { "name": "refundAmount", "type": "u64" }
        ]
      }
    }
  ],
  "events": [
    {
      "name": "AjoGroupCreatedEvent",
      "fields": [
        { "name": "groupName", "type": "string", "index": false },
        { "name": "securityDeposit", "type": "u64", "index": false },
        { "name": "contributionAmount", "type": "u64", "index": false },
        { "name": "numParticipants", "type": "u8", "index": false },
        { "name": "contributionInterval", "type": "u8", "index": false },
        { "name": "payoutInterval", "type": "u8", "index": false }
      ]
    },
    {
      "name": "ParticipantJoinedEvent",
      "fields": [
        { "name": "groupName", "type": "string", "index": false },
        { "name": "participant", "type": "publicKey", "index": false },
        { "name": "joinTimestamp", "type": "i64", "index": false }
      ]
    },
    {
      "name": "ContributionMadeEvent",
      "fields": [
        { "name": "groupName", "type": "string", "index": false },
        { "name": "contributor", "type": "publicKey", "index": false },
        { "name": "contributionAmount", "type": "u64", "index": false },
        { "name": "currentRound", "type": "u16", "index": false }
      ]
    },
    {
      "name": "PayoutMadeEvent",
      "fields": [
        { "name": "groupName", "type": "string", "index": false },
        { "name": "recipient", "type": "publicKey", "index": false },
        { "name": "payoutAmount", "type": "u64", "index": false },
        { "name": "payoutRound", "type": "u16", "index": false }
      ]
    },
    {
      "name": "AjoGroupClosedEvent",
      "fields": [
        { "name": "groupName", "type": "string", "index": false },
        { "name": "totalVotes", "type": "u8", "index": false },
        { "name": "groupSize", "type": "u8", "index": false }
      ]
    },
    {
      "name": "RefundClaimedEvent",
      "fields": [
        { "name": "groupName", "type": "string", "index": false },
        { "name": "participant", "type": "publicKey", "index": false },
        { "name": "amount", "type": "u64", "index": false }
      ]
    }
  ],
  "errors": [
    {
      "code": 6000,
      "name": "AlreadyClaimed",
      "msg": "You have already claimed your payout"
    },
    {
      "code": 6001,
      "name": "NotAllContributed",
      "msg": "Not all participants have contributed yet"
    },
    {
      "code": 6002,
      "name": "InvalidContributionAmount",
      "msg": "Contribution amount must be greater than zero"
    },
    {
      "code": 6003,
      "name": "InvalidInterval",
      "msg": "Interval must be between 1 and 90 days"
    },
    {
      "code": 6004,
      "name": "InvalidParticipantCount",
      "msg": "Number of participants must be between 3 and 20"
    },
    {
      "code": 6005,
      "name": "NameTooLong",
      "msg": "Group name is too long (maximum 50 characters)"
    },
    {
      "code": 6006,
      "name": "GroupAlreadyStarted",
      "msg": "Group has already started"
    },
    {
      "code": 6007,
      "name": "GroupAlreadyClosed",
      "msg": "Group is already closed"
    },
    {
      "code": 6008,
      "name": "AlreadyJoined",
      "msg": "You have already joined this group"
    },
    {
      "code": 6009,
      "name": "InvalidSecurityDeposit",
      "msg": "Security Deposit must be greater than 0"
    },
    {
      "code": 6010,
      "name": "OnlyAdminCanUpdate",
      "msg": "Only admin can update global state"
    },
    {
      "code": 6011,
      "name": "AlreadyVotedToClose",
      "msg": "You have already voted to close this group"
    },
    {
      "code": 6012,
      "name": "NotParticipant",
      "msg": "You are not a participant in this group"
    },
    {
      "code": 6013,
      "name": "GroupNotStarted",
      "msg": "Group has not started yet"
    },
    {
      "code": 6014,
      "name": "GroupNotClosed",
      "msg": "Group has not been closed yet"
    },
    {
      "code": 6015,
      "name": "GroupCompleted",
      "msg": "Group has completed all rounds"
    },
    {
      "code": 6016,
      "name": "NotAParticipant",
      "msg": "You are not a participant in this group"
    },
    {
      "code": 6017,
      "name": "CannotContributeToThisRound",
      "msg": "You cannot contribute to this round"
    },
    {
      "code": 6018,
      "name": "IntervalNotPassed",
      "msg": "Interval has not passed yet"
    },
    {
      "code": 6019,
      "name": "InsufficientFunds",
      "msg": "Insufficient funds in token account"
    },
    {
      "code": 6020,
      "name": "InvalidFeePercentage",
      "msg": "Fee percentage must be between 0 and 100"
    },
    {
      "code": 6021,
      "name": "AlreadyContributed",
      "msg": "You have already contributed to this round"
    },
    {
      "code": 6022,
      "name": "NotCurrentRecipient",
      "msg": "You are not the recipient for this round"
    },
    {
      "code": 6023,
      "name": "PayoutNotYetDue",
      "msg": "Payout period has not yet arrived"
    },
    {
      "code": 6024,
      "name": "InvalidTokenAccountMint",
      "msg": "Token Account mint does not match"
    },
    {
      "code": 6025,
      "name": "NoRefundToClaim",
      "msg": "No refunds is available for you to claim on this group"
    }
  ]
}
